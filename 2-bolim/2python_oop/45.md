# 📚 Darsning mavzusi: Fayllar bilan ishlash: Fayllarni o‘qish, yozish va boshqarish (with as konstruktsiyasi)

## Qisqacha vaqt taqsimoti

| Qism                          | Davomiyligi     |
|-------------------------------|-----------------|
| Kirish va fayllar bilan ishlash haqida | 20 daqiqa       |
| Fayllarni o‘qish va yozish (with as bilan) | 25 daqiqa       |
| Fayllarni boshqarish va xatolarni ushlash | 20 daqiqa       |
| Amaliy mashqlar               | 25 daqiqa       |
| Xulosa va uy vazifasi         | 20 daqiqa       |
| Qayta aloqa va savollar       | 10 daqiqa       |
| Jami                          | 120 daqiqa (2 soat) |

Bu usul yoshlar uchun samarali, qiziqarli va tushunarli bo‘lib, o‘quvchilarni dars jarayoniga faolroq jalb qiladi.

---

# 📖 Darsning batafsil rejasi

## 1. Kirish va fayllar bilan ishlash haqida (20 daqiqa)

Assalomu alaykum, yosh dasturchilar! 😊 Bugun biz Python’da fayllar bilan ishlashni o‘rganamiz. Fayllarni o‘qish, yozish va boshqarish loyihalarda, masalan, ma’lumotlarni saqlash yoki log yozishda juda muhimdir. Ayniqsa, `with as` konstruktsiyasidan foydalanib, fayllarni xavfsiz boshqarishni ko‘ramiz.

**Fayllar bilan ishlash nima?**  
Python’da fayllar bilan ishlash uchun `open()` funksiyasi ishlatiladi. Fayllarni o‘qish, yozish va boshqa amallar uchun turli rejimlar mavjud (masalan, o‘qish uchun `r`, yozish uchun `w`). Bugun biz quyidagilarni o‘rganamiz:  
- `with as` konstruktsiyasi yordamida fayllarni ochish va yopish.  
- Fayllarni o‘qish va yozishning turli usullari.  
- Fayllarni boshqarish va xatolarni ushlash.  

Oddiy misol bilan boshlaymiz:

```python
# Faylga yozish
with open("salom.txt", "w", encoding="utf-8") as fayl:
    fayl.write("Salom, dunyo!")
print("Faylga yozildi!")
```

**Eslatma:** Bu darsda biz faqat kodni ko‘rib chiqamiz, chunki real fayl operatsiyalari muhitga bog‘liq.

Keling, bir savol: Fayllar bilan ishlash qanday hollarda kerak bo‘ladi deb o‘ylaysiz? (O‘quvchilar javobini kutaman, to‘g‘ri javob bo‘lsa: “Ajoyib, to‘g‘ri!” deyman.)

Mashq: Quyidagi vazifani bajaring:  
- "test.txt" nomli faylga "Assalomu alaykum!" matnini yozing (`with as` ishlating).  
- Kodni yozib, natija haqida o‘ylang (fayl yaratilishini tasavvur qiling).  

5 daqiqa vaqt beraman!

---

## 2. Fayllarni o‘qish va yozish (with as bilan) (25 daqiqa)

Endi fayllarni o‘qish va yozishni `with as` konstruktsiyasi bilan o‘rganamiz!

### `with as` konstruktsiyasi nima?
`with as` konstruktsiyasi faylni ochib, ishlatib bo‘lgandan keyin avtomatik yopadi. Bu xavfsiz va qulay usul:

```python
# Faylga yozish
with open("matn.txt", "w", encoding="utf-8") as fayl:
    fayl.write("Bu birinchi qator.\n")
    fayl.write("Bu ikkinchi qator.")
print("Faylga yozildi!")
```

Bu yerda:  
- `w` rejimi faylni yozish uchun ochadi (agar fayl mavjud bo‘lsa, ustiga yozadi).  
- `encoding="utf-8"` matnni to‘g‘ri kodlash uchun ishlatiladi.  
- Fayl ishlatib bo‘lingandan keyin avtomatik yopiladi.

### Faylni o‘qish
`r` rejimi yordamida faylni o‘qish:

```python
# Faylni o‘qish
with open("matn.txt", "r", encoding="utf-8") as fayl:
    matn = fayl.read()
print(matn)
# Natija:
# Bu birinchi qator.
# Bu ikkinchi qator.
```

### Qatorlarni alohida o‘qish
Faylni qatorlarga bo‘lib o‘qish uchun `readlines()` yoki `for` siklidan foydalanamiz:

```python
# Qatorlarni ro‘yxat sifatida o‘qish
with open("matn.txt", "r", encoding="utf-8") as fayl:
    qatorlar = fayl.readlines()
print(qatorlar)  # ['Bu birinchi qator.\n', 'Bu ikkinchi qator.']

# For sikli bilan o‘qish
with open("matn.txt", "r", encoding="utf-8") as fayl:
    for qator in fayl:
        print(qator.strip())  # strip() qator oxiridagi \n ni olib tashlaydi
# Natija:
# Bu birinchi qator.
# Bu ikkinchi qator.
```

### Faylga qo‘shimcha yozish
`a` (append) rejimi yordamida fayl oxiriga yozish:

```python
# Faylga qo‘shimcha yozish
with open("matn.txt", "a", encoding="utf-8") as fayl:
    fayl.write("\nBu uchinchi qator.")
print("Faylga qo‘shildi!")
```

**Rejimlar:**  
- `r`: O‘qish (standart rejim).  
- `w`: Yozish (faylni qayta yaratadi).  
- `a`: Qo‘shimcha yozish (fayl oxiriga yozadi).  
- `r+`: O‘qish va yozish.  

Mashq: Quyidagi vazifani bajaring:  
- "qaydnoma.txt" nomli faylga "Bugun dars bo‘ldi." matnini yozing.  
- Fayl oxiriga "Dars juda qiziqarli edi!" matnini qo‘shing (`a` rejimi bilan).  
- Faylni o‘qib, matnni ekranga chiqaring.  

5 daqiqa vaqt beraman!

---

## 3. Fayllarni boshqarish va xatolarni ushlash (20 daqiqa)

Ajoyib, endi fayllarni boshqarish va xatolarni ushlashni o‘rganamiz!

### Faylning mavjudligini tekshirish
Fayl bilan ishlashdan oldin uning mavjudligini tekshirish uchun `os.path` ishlatamiz:

```python
import os.path

fayl_nomi = "matn.txt"
if os.path.exists(fayl_nomi):
    with open(fayl_nomi, "r", encoding="utf-8") as fayl:
        print(fayl.read())
else:
    print("Fayl mavjud emas!")
```

### Xatolarni ushlash
Fayl bilan ishlashda xatolarni ushlash uchun `try-except` ishlatamiz:

```python
fayl_nomi = "mavjud_emas.txt"
try:
    with open(fayl_nomi, "r", encoding="utf-8") as fayl:
        matn = fayl.read()
        print(matn)
except FileNotFoundError:
    print(f"Xato: {fayl_nomi} fayli topilmadi!")
except IOError:
    print("Faylni o‘qish/yozishda xato yuz berdi!")
# Natija:
# Xato: mavjud_emas.txt fayli topilmadi!
```

### Faylni qator-qator yozish
`writelines()` yordamida ro‘yxatni faylga yozish:

```python
qatorlar = ["Birinchi qator.\n", "Ikkinchi qator.\n", "Uchinchi qator.\n"]
with open("qatorlar.txt", "w", encoding="utf-8") as fayl:
    fayl.writelines(qatorlar)
print("Qatorlar yozildi!")
```

### Katta fayllarni o‘qish
Katta fayllarni o‘qishda `read()` o‘rniga qator-qator o‘qish samarali:

```python
try:
    with open("katta_fayl.txt", "r", encoding="utf-8") as fayl:
        for qator in fayl:
            print(qator.strip())
except FileNotFoundError:
    print("Fayl topilmadi!")
```

Mashq: Quyidagi vazifani bajaring:  
- "log.txt" nomli faylga 3 ta qator matn yozing (`writelines` ishlating).  
- Faylni qator-qator o‘qib, har bir qatorni ekranga chiqaring.  
- Mavjud bo‘lmagan faylni o‘qishga urinib, xatoni ushlang.  

5 daqiqa vaqt beraman!

---

## 4. Amaliy mashqlar (25 daqiqa)

Endi o‘rganganlarimizni amalda sinab ko‘ramiz! Quyidagi mashqlarni qilamiz:

### Mashq 1: Faylga yozish va o‘qish
- "eslatma.txt" nomli faylga "Bugun Python darsi bo‘ldi." matnini yozing.  
- Faylni o‘qib, matnni ekranga chiqaring.

```python
# Yozish
with open("eslatma.txt", "w", encoding="utf-8") as fayl:
    fayl.write("Bugun Python darsi bo‘ldi.")
print("Faylga yozildi!")

# O‘qish
with open("eslatma.txt", "r", encoding="utf-8") as fayl:
    matn = fayl.read()
print(matn)
# Natija:
# Bugun Python darsi bo‘ldi.
```

### Mashq 2: Qo‘shimcha yozish va qator-qator o‘qish
- "todo.txt" nomli faylga "1. Darsni takrorlash" matnini yozing.  
- Faylga "2. Uy vazifasini bajarish" matnini qo‘shing (`a` rejimi bilan).  
- Faylni qator-qator o‘qib, har bir qatorni ekranga chiqaring.

```python
# Yozish
with open("todo.txt", "w", encoding="utf-8") as fayl:
    fayl.write("1. Darsni takrorlash\n")
print("Faylga yozildi!")

# Qo‘shimcha yozish
with open("todo.txt", "a", encoding="utf-8") as fayl:
    fayl.write("2. Uy vazifasini bajarish\n")
print("Faylga qo‘shildi!")

# Qator-qator o‘qish
with open("todo.txt", "r", encoding="utf-8") as fayl:
    for qator in fayl:
        print(qator.strip())
# Natija:
# 1. Darsni takrorlash
# 2. Uy vazifasini bajarish
```

### Mashq 3: Xatolarni ushlash
- "mavjud_emas.txt" nomli faylni o‘qishga urining va xatoni ushlang.  
- "loglar.txt" nomli faylga 3 ta qator yozing va agar xato yuz bersa, xabarni ekranga chiqaring.

```python
# Xatolarni ushlash
try:
    with open("mavjud_emas.txt", "r", encoding="utf-8") as fayl:
        print(fayl.read())
except FileNotFoundError:
    print("Fayl topilmadi!")
# Natija:
# Fayl topilmadi!

# Yozishda xatolarni ushlash
try:
    qatorlar = ["Log 1\n", "Log 2\n", "Log 3\n"]
    with open("loglar.txt", "w", encoding="utf-8") as fayl:
        fayl.writelines(qatorlar)
    print("Loglar yozildi!")
except IOError:
    print("Faylga yozishda xato yuz berdi!")
```

Har bir mashq uchun 8-9 daqiqa vaqt beraman. Kodlarni yozib, natijalarni ekranga chiqaring!

---

## 5. Xulosa va uy vazifasi (20 daqiqa)

Ajoyib, yosh dasturchilar! 🎉 Bugun biz fayllar bilan ishlashni o‘rgandik. `with as` konstruktsiyasi yordamida fayllarni o‘qish, yozish va boshqarishni, shuningdek, xatolarni ushlashni ko‘rdik.

Uyga vazifa sifatida quyidagini qiling:  
1. "notes.txt" nomli faylga "Bugun yangi dars o‘tdik." matnini yozing.  
   - Faylga "Dars juda foydali bo‘ldi!" matnini qo‘shing (`a` rejimi bilan).  
   - Faylni o‘qib, matnni ekranga chiqaring.  
2. "jurnal.txt" nomli faylga 4 ta qator matn yozing (`writelines` ishlating).  
   - Faylni qator-qator o‘qib, har bir qatorni ekranga chiqaring.  
3. "xato.txt" nomli faylni o‘qishga urining:  
   - Agar fayl mavjud bo‘lmasa, xatoni ushlab, ekranga xabar chiqaring.  

Darsimiz shu bilan tugadi, keyingi darsda esa `JSON moduli: Ma’lumotlarni o‘qish va yozish, parsing` mavzusini o‘rganamiz. Savollaringiz bo‘lsa, yozib qoldiring yoki keyingi darsda so‘rang! 😊

---

## 6. Qayta ko'rib chiqish va savollar (10 daqiqa)

Zo‘r ish qildingiz! Endi bir oz o'rganganlarimizi qayta ko'rib chiqamiz. Bugungi darsda nimalarni o‘rgandik? Kim aytib bera oladi? (O‘quvchilar javobini kutaman.)

- `with as` konstruktsiyasi qanday ishlaydi?  
- Fayl rejimlari qanday farq qiladi?  
- Fayl bilan ishlashda qanday xatolarga duch kelish mumkin?  

Qandaydir tushunmovchilik bo‘ldimi? Savollaringiz bormi? (O‘quvchilar savollarini eshitaman va tushuntiraman.) 😊

---