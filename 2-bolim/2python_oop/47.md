# ğŸ“š Darsning mavzusi: Memory Management boshlang'ich umumiy tushunchalar

## Qisqacha vaqt taqsimoti

| Qism                          | Davomiyligi     |
|-------------------------------|-----------------|
| Kirish va Memory Management haqida | 20 daqiqa       |
| Pythonâ€™da xotira boshqaruvi asoslari | 25 daqiqa       |
| Garbage Collection va xotira optimizatsiyasi | 20 daqiqa       |
| Amaliy mashqlar               | 25 daqiqa       |
| Xulosa va uy vazifasi         | 20 daqiqa       |
| Qayta aloqa va savollar       | 10 daqiqa       |
| Jami                          | 120 daqiqa (2 soat) |

Bu usul yoshlar uchun samarali, qiziqarli va tushunarli boâ€˜lib, oâ€˜quvchilarni dars jarayoniga faolroq jalb qiladi.

---

# ğŸ“– Darsning batafsil rejasi

## 1. Kirish va Memory Management haqida (20 daqiqa)

Assalomu alaykum, yosh dasturchilar! ğŸ˜Š Bugun biz dasturlashda juda muhim mavzu â€” **Memory Management** (xotira boshqaruvi) haqida boshlangâ€˜ich tushunchalarni oâ€˜rganamiz. Xotira boshqaruvi dastur samaradorligi va xavfsizligi uchun juda muhimdir, ayniqsa Python kabi yuqori darajali tillarda.

**Memory Management nima?**  
Xotira boshqaruvi â€” bu dastur ishlayotganda xotiradan (RAM) qanday foydalanishni boshqarish jarayoni. U obyektlar uchun xotirani ajratish, ulardan foydalanish va kerak boâ€˜lmaganda xotirani boâ€˜shatishni oâ€˜z ichiga oladi. Bugun biz quyidagilarni oâ€˜rganamiz:  
- Xotira qanday ajratiladi va boâ€˜shatiladi.  
- Pythonâ€™da xotira boshqaruvi qanday ishlaydi.  
- Garbage Collection (axlat yigâ€˜ish) mexanizmi.  

Oddiy misol bilan boshlaymiz:

```python
# Oddiy oâ€˜zgaruvchi yaratish
a = 10
b = [1, 2, 3, 4, 5]
```

Bu yerda `a` va `b` oâ€˜zgaruvchilari uchun xotira ajratildi. Agar ular kerak boâ€˜lmasa, xotira boâ€˜shatilishi kerak.

Keling, bir savol: Xotira boshqaruvi nima uchun muhim deb oâ€˜ylaysiz? (Oâ€˜quvchilar javobini kutaman, toâ€˜gâ€˜ri javob boâ€˜lsa: â€œAjoyib, toâ€˜gâ€˜ri!â€ deyman.)

Mashq: Quyidagi vazifani bajaring:  
- `x = "Salom"` va `y = [1, 2, 3]` oâ€˜zgaruvchilarini yarating.  
- Ushbu oâ€˜zgaruvchilar xotirada qayerda saqlanishi haqida oâ€˜ylang (tasavvur qiling).  

5 daqiqa vaqt beraman!

---

## 2. Pythonâ€™da xotira boshqaruvi asoslari (25 daqiqa)

Endi Pythonâ€™da xotira boshqaruvi qanday ishlashini oâ€˜rganamiz!

### Xotira ajratish
Pythonâ€™da har bir obyekt (masalan, son, roâ€˜yxat, string) yaratilganda xotirada joy ajratiladi. Python avtomatik ravishda xotirani boshqaradi, yaâ€™ni dasturchi xotirani qoâ€˜lda ajratib yoki boâ€˜shatib oâ€˜tirishi shart emas:

```python
# Xotira ajratish
ism = "Ali"  # String obyekt uchun xotira ajratildi
sonlar = [1, 2, 3]  # Roâ€˜yxat obyekt uchun xotira ajratildi
```

### Reference Counting (Havola hisobi)
Pythonâ€™da xotira boshqaruvi asosiy mexanizmlaridan biri â€” **Reference Counting**. Har bir obyektning havola soni hisoblanadi. Agar obyektga hech qanday havola qolmasa, u avtomatik oâ€˜chiriladi:

```python
import sys

a = "Salom"
print(sys.getrefcount(a))  # Havola sonini koâ€˜rish (2 yoki undan koâ€˜p boâ€˜lishi mumkin)

b = a  # Yana bir havola qoâ€˜shildi
print(sys.getrefcount(a))  # Havola soni oshadi

# Havolani oâ€˜chirish
b = None
print(sys.getrefcount(a))  # Havola soni kamayadi
```

**Eslatma:** `sys.getrefcount()` ichki foydalanish uchun qoâ€˜shimcha havolalarni hisobga olishi mumkin, shuning uchun natijalar kutilganidan yuqori boâ€˜lishi mumkin.

### Xotira boâ€˜shatish
Agar obyektning havola soni 0 ga tushsa, Python uni avtomatik oâ€˜chiradi:

```python
a = [1, 2, 3]
a = None  # Havola yoâ€˜q, roâ€˜yxat xotiradan oâ€˜chiriladi
```

Ammo bu mexanizm har doim ham yetarli emas, chunki tsiklik havolalar boâ€˜lishi mumkin (masalan, roâ€˜yxat oâ€˜ziga oâ€˜zi havola qilganda).

Mashq: Quyidagi vazifani bajaring:  
- `sys` modulini import qiling.  
- `s = "Python"` oâ€˜zgaruvchisini yarating va uning havola sonini tekshiring (`sys.getrefcount` bilan).  
- `t = s` qilib, havola sonini yana tekshiring, keyin `t = None` qilib, havola sonini uchinchi marta tekshiring.  

5 daqiqa vaqt beraman!

---

## 3. Garbage Collection va xotira optimizatsiyasi (20 daqiqa)

Ajoyib, endi **Garbage Collection** (axlat yigâ€˜ish) va xotira optimizatsiyasini oâ€˜rganamiz!

### Garbage Collection nima?
Pythonâ€™da Garbage Collection (GC) â€” bu xotirani avtomatik boâ€˜shatish mexanizmi. Reference Counting tsiklik havolalarni aniqlay olmaydi, shuning uchun GC qoâ€˜shimcha yordam beradi:

```python
import gc

# Tsiklik havola misoli
list1 = []
list2 = []
list1.append(list2)  # list1 list2 ga havola qiladi
list2.append(list1)  # list2 list1 ga havola qiladi

# Havolalarni oâ€˜chirish
list1 = None
list2 = None

# Garbage Collection ni qoâ€˜lda ishga tushirish
gc.collect()
print("Tsiklik havolalar tozalandi!")
```

Bu yerda `gc.collect()` qoâ€˜lda chaqirildi, lekin odatda Python buni avtomatik bajaradi.

### Garbage Collection sozlamalari
GC ni oâ€˜chirish yoki sozlash mumkin:

```python
import gc

# GC holatini tekshirish
print(gc.isenabled())  # True

# GC ni oâ€˜chirish
gc.disable()
print(gc.isenabled())  # False

# GC ni qayta yoqish
gc.enable()
print(gc.isenabled())  # True
```

### Xotira optimizatsiyasi uchun maslahatlar
1. **Katta obyektlardan qochish:** Katta roâ€˜yxatlar yoki lugâ€˜atlar xotirani koâ€˜p egallaydi. Agar kerak boâ€˜lmasa, ularni oâ€˜chirish uchun `del` ishlatamiz:

```python
katta_royxat = [0] * 1000000  # Katta roâ€˜yxat
del katta_royxat  # Xotirani boâ€˜shatish
```

2. **Generatorlardan foydalanish:** Katta maâ€™lumotlarni roâ€˜yxat sifatida saqlash oâ€˜rniga generatorlardan foydalanish xotirani tejaydi:

```python
# Roâ€˜yxat oâ€˜rniga generator
generator = (i for i in range(1000000))
print(next(generator))  # 0
print(next(generator))  # 1
```

3. **Kichik obyektlarni qayta ishlatish:** Python kichik sonlar va stringlarni qayta ishlatadi (interning):

```python
a = 42
b = 42
print(a is b)  # True (xotirada bir joy ishlatiladi)
```

Mashq: Quyidagi vazifani bajaring:  
- `gc` modulini import qiling va GC holatini tekshiring (`gc.isenabled()`).  
- Katta roâ€˜yxat yarating (`[0] * 10000`), soâ€˜ng uni `del` bilan oâ€˜chirib, `gc.collect()` ni chaqiring.  
- Generator yarating (`range(5)`) va birinchi ikkita elementni ekranga chiqaring.  

5 daqiqa vaqt beraman!

---

## 4. Amaliy mashqlar (25 daqiqa)

Endi oâ€˜rganganlarimizni amalda sinab koâ€˜ramiz! Quyidagi mashqlarni qilamiz:

### Mashq 1: Havola hisobi
- `sys` modulini import qiling.  
- `text = "Salom"` oâ€˜zgaruvchisini yarating va uning havola sonini tekshiring.  
- `text2 = text` qilib, havola sonini yana tekshiring, keyin `text2 = None` qilib, yana tekshiring.

```python
import sys

text = "Salom"
print(sys.getrefcount(text))  # Havola soni (3 yoki undan koâ€˜p boâ€˜lishi mumkin)
text2 = text
print(sys.getrefcount(text))  # Havola soni oshadi
text2 = None
print(sys.getrefcount(text))  # Havola soni kamayadi
```

### Mashq 2: Garbage Collection
- Tsiklik havola yarating: ikkita roâ€˜yxat (`list1` va `list2`) bir-biriga havola qilsin.  
- Havolalarni `None` qilib oâ€˜chirib, `gc.collect()` ni chaqiring.

```python
import gc

list1 = []
list2 = []
list1.append(list2)
list2.append(list1)

list1 = None
list2 = None
gc.collect()
print("Tsiklik havolalar tozalandi!")
```

### Mashq 3: Generator bilan ishlash
- `range(1000)` yordamida generator yarating.  
- Birinchi 5 ta elementni ekranga chiqaring (generator yordamida).  
- Katta roâ€˜yxat yarating (`[0] * 5000`) va uni `del` bilan oâ€˜chiring.

```python
# Generator
gen = (i for i in range(1000))
for _ in range(5):
    print(next(gen))  # 0, 1, 2, 3, 4

# Katta roâ€˜yxat
katta = [0] * 5000
del katta
print("Katta roâ€˜yxat oâ€˜chirildi!")
```

Har bir mashq uchun 8-9 daqiqa vaqt beraman. Kodlarni yozib, natijalarni ekranga chiqaring!

---

## 5. Xulosa va uy vazifasi (20 daqiqa)

Ajoyib, yosh dasturchilar! ğŸ‰ Bugun biz xotira boshqaruvi haqida boshlangâ€˜ich tushunchalarni oâ€˜rgandik. Reference Counting, Garbage Collection va xotira optimizatsiyasi usullarini koâ€˜rdik.

Uyga vazifa sifatida quyidagini qiling:  
1. `sys` modulini ishlatib, `data = "Python"` oâ€˜zgaruvchisini yarating va uning havola sonini tekshiring.  
   - `data2 = data` qilib, havola sonini yana tekshiring.  
   - `data2 = None` qilib, yana tekshiring.  
2. Tsiklik havola yarating (ikkita roâ€˜yxat bir-biriga havola qilsin), soâ€˜ng ularni `None` qilib, `gc.collect()` ni chaqiring.  
3. `range(10000)` yordamida generator yarating va birinchi 10 ta elementni ekranga chiqaring.  

Darsimiz shu bilan tugadi, keyingi darsda esa `Memory Management advanced` mavzusini oâ€˜rganamiz. Savollaringiz boâ€˜lsa, yozib qoldiring yoki keyingi darsda soâ€˜rang! ğŸ˜Š

---

## 6. Qayta ko'rib chiqish va savollar (10 daqiqa)

Zoâ€˜r ish qildingiz! Endi bir oz o'rganganlarimizi qayta ko'rib chiqamiz. Bugungi darsda nimalarni oâ€˜rgandik? Kim aytib bera oladi? (Oâ€˜quvchilar javobini kutaman.)

- Reference Counting qanday ishlaydi?  
- Garbage Collection qachon kerak boâ€˜ladi?  
- Xotirani optimizatsiya qilish uchun qanday usullar bor?  

Qandaydir tushunmovchilik boâ€˜ldimi? Savollaringiz bormi? (Oâ€˜quvchilar savollarini eshitaman va tushuntiraman.) ğŸ˜Š

---