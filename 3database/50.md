---

# 📚 Darsning mavzusi: PostgreSQL Kirish

## Qisqacha vaqt taqsimoti

| Qism                          | Davomiyligi     |
|-------------------------------|-----------------|
| Kirish va PostgreSQL haqida   | 20 daqiqa       |
| PostgreSQL o‘rnatish va asosiy so‘rovlar | 25 daqiqa       |
| Python bilan PostgreSQL ulanish | 20 daqiqa       |
| Amaliy mashqlar               | 25 daqiqa       |
| Xulosa va uy vazifasi         | 20 daqiqa       |
| Qayta aloqa va savollar       | 10 daqiqa       |
| Jami                          | 120 daqiqa (2 soat) |

Bu usul yoshlar uchun samarali, qiziqarli va tushunarli bo‘lib, o‘quvchilarni dars jarayoniga faolroq jalb qiladi.

---

# 📖 Darsning batafsil rejasi

## 1. Kirish va PostgreSQL haqida (20 daqiqa)

Assalomu alaykum, yosh dasturchilar! 😊 Bugun biz **PostgreSQL** deb nomlangan kuchli va mashhur ma’lumotlar bazasi tizimi bilan tanishamiz. PostgreSQL loyihalarda ma’lumotlarni tartibli saqlash va murakkab so‘rovlar bilan ishlash uchun juda mos.

**PostgreSQL nima?**  
PostgreSQL — bu ochiq kodli (open-source) relational ma’lumotlar bazasi tizimi bo‘lib, SQL tilidan foydalanadi. U ma’lumotlar izchilligi, kengaytirilishi va murakkab so‘rovlar bilan ishlashda juda mashhur. Bugun biz quyidagilarni o‘rganamiz:  
- PostgreSQL’ni qanday o‘rnatish va ishlatish.  
- Asosiy SQL so‘rovlar bilan ishlash.  
- Python yordamida PostgreSQL’ga ulanish.  

**Afzalliklari:**  
- Ma’lumotlar izchilligi yuqori (ACID qoidalariga mos).  
- Murakkab so‘rovlar va kengaytmalar (extensions) qo‘llab-quvvatlanadi.  
- Ochiq kodli va bepul.  

Keling, bir savol: Relational ma’lumotlar bazasi nima uchun muhim deb o‘ylaysiz? (O‘quvchilar javobini kutaman, to‘g‘ri javob bo‘lsa: “Ajoyib, to‘g‘ri!” deyman.)

Mashq: Quyidagi vazifani bajaring:  
- PostgreSQL haqida o‘zingizning taxminiy tushunchangizni yozing (qog‘ozda yoki fikr sifatida).  
- PostgreSQL’ni qanday loyihalarda ishlatish mumkinligi haqida o‘ylang (masalan, bank tizimlari).  

5 daqiqa vaqt beraman!

---

## 2. PostgreSQL o‘rnatish va asosiy so‘rovlar (25 daqiqa)

Endi PostgreSQL bilan ishlashni boshlaymiz!

### PostgreSQL o‘rnatish (qisqacha)
1. **O‘rnatish:** PostgreSQL’ni rasmiy saytidan (https://www.postgresql.org/download/) yuklab o‘rnatamiz.  
   - Windows/Linux/Mac uchun mos versiyani tanlang.  
   - O‘rnatish jarayonida parol sozlang (masalan, `admin123`).  
2. **pgAdmin:** PostgreSQL bilan ishlash uchun pgAdmin grafik interfeysini o‘rnatish mumkin.  
3. **Tekshirish:** Terminalda `psql --version` buyrug‘i bilan o‘rnatilganligini tekshiramiz.  

**Eslatma:** Bu darsda biz faqat asosiy so‘rovlar va ulanishni ko‘rib chiqamiz, o‘rnatish jarayonini tasavvur qilamiz.

### PostgreSQL’da asosiy so‘rovlar
PostgreSQL’da ishlaydigan SQL so‘rovlarini ko‘rib chiqamiz. Quyida oddiy misollar:

#### 1. Baza yaratish
```sql
CREATE DATABASE mydatabase;
```

#### 2. Jadval yaratish
```sql
-- mydatabase bazasiga ulanamiz
\c mydatabase

-- users jadvalini yaratish
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    ism VARCHAR(50),
    yosh INTEGER
);
```

#### 3. Ma’lumot qo‘shish
```sql
INSERT INTO users (ism, yosh) VALUES ('Ali', 20);
INSERT INTO users (ism, yosh) VALUES ('Zilola', 22);
```

#### 4. Ma’lumot olish
```sql
SELECT * FROM users;
-- Natija:
-- id | ism    | yosh
-- 1  | Ali    | 20
-- 2  | Zilola | 22

-- Filtrlash
SELECT * FROM users WHERE yosh > 21;
-- Natija:
-- id | ism    | yosh
-- 2  | Zilola | 22
```

#### 5. Ma’lumotni o‘zgartirish
```sql
UPDATE users SET yosh = 23 WHERE ism = 'Zilola';
```

#### 6. Ma’lumotni o‘chirish
```sql
DELETE FROM users WHERE ism = 'Ali';
```

**Eslatma:** Ushbu so‘rovlar PostgreSQL’ning `psql` terminalida yoki pgAdmin’da ishlatiladi.

Mashq: Quyidagi vazifani bajaring:  
- `products` nomli jadval tuzing (id, nomi, narxi).  
- 2 ta mahsulot qo‘shish so‘rovini yozing.  
- Narxi 100 dan yuqori bo‘lgan mahsulotlarni topish so‘rovini yozing.  

5 daqiqa vaqt beraman!

---

## 3. Python bilan PostgreSQL ulanish (20 daqiqa)

Ajoyib, endi Python yordamida PostgreSQL’ga ulanishni o‘rganamiz!

### `psycopg2` moduli
Python’da PostgreSQL bilan ishlash uchun `psycopg2` modulidan foydalanamiz. Avval uni o‘rnatamiz:

```bash
pip install psycopg2
```

### PostgreSQL’ga ulanish
`psycopg2` yordamida ulanish va asosiy amallar:

```python
import psycopg2

# PostgreSQL’ga ulanish
try:
    conn = psycopg2.connect(
        database="mydatabase",
        user="postgres",
        password="admin123",  # O‘rnatishda kiritgan parol
        host="localhost",
        port="5432"
    )
    cursor = conn.cursor()
    print("Bazaga ulanildi!")

    # Jadval yaratish
    cursor.execute('''CREATE TABLE IF NOT EXISTS students (
        id SERIAL PRIMARY KEY,
        ism VARCHAR(50),
        baho INTEGER
    )''')

    # Ma’lumot qo‘shish
    cursor.execute("INSERT INTO students (ism, baho) VALUES (%s, %s)", ("Vali", 5))
    cursor.execute("INSERT INTO students (ism, baho) VALUES (%s, %s)", ("Zilola", 4))
    conn.commit()

    # Ma’lumot olish
    cursor.execute("SELECT * FROM students WHERE baho > 4")
    natija = cursor.fetchall()
    print(natija)  # [(1, 'Vali', 5)]

except psycopg2.Error as xato:
    print(f"Xato: {xato}")
finally:
    cursor.close()
    conn.close()
    print("Ulanish yopildi!")
```

**Tushuntirish:**  
- `psycopg2.connect` orqali bazaga ulanamiz.  
- `cursor` yordamida SQL so‘rovlarini bajarish mumkin.  
- `commit()` o‘zgarishlarni saqlaydi.  
- Xatolarni ushlash uchun `try-except` ishlatamiz.  

**Eslatma:** Bu darsda biz faqat kodni ko‘rib chiqamiz, chunki real ulanish muhitga bog‘liq.

Mashq: Quyidagi vazifani bajaring:  
- `employees` nomli jadval tuzing (id, name, salary).  
- 2 ta xodim qo‘shish so‘rovini Python’da yozing.  
- Maoshi 1000 dan yuqori bo‘lgan xodimlarni topish so‘rovini yozing.  

5 daqiqa vaqt beraman!

---

## 4. Amaliy mashqlar (25 daqiqa)

Endi o‘rganganlarimizni amalda sinab ko‘ramiz! Quyidagi mashqlarni qilamiz:

### Mashq 1: SQL so‘rovlar
- `books` nomli jadval tuzing (id, title, price).  
- 2 ta kitob qo‘shish so‘rovini yozing.  
- Narxi 50 dan yuqori bo‘lgan kitoblarni topish so‘rovini yozing.

```sql
-- Jadval yaratish
CREATE TABLE books (
    id SERIAL PRIMARY KEY,
    title VARCHAR(100),
    price INTEGER
);

-- Ma’lumot qo‘shish
INSERT INTO books (title, price) VALUES ('Python 101', 60);
INSERT INTO books (title, price) VALUES ('Java Basics', 40);

-- Ma’lumot olish
SELECT * FROM books WHERE price > 50;
-- Natija:
-- id | title      | price
-- 1  | Python 101 | 60
```

### Mashq 2: Python’da ulanish va so‘rovlar
- `products` nomli jadval tuzing (id, nomi, narxi).  
- 2 ta mahsulot qo‘shing.  
- Narxi 100 dan yuqori bo‘lgan mahsulotlarni toping.

```python
import psycopg2

try:
    conn = psycopg2.connect(
        database="mydatabase",
        user="postgres",
        password="admin123",
        host="localhost",
        port="5432"
    )
    cursor = conn.cursor()

    # Jadval yaratish
    cursor.execute('''CREATE TABLE IF NOT EXISTS products (
        id SERIAL PRIMARY KEY,
        nomi VARCHAR(50),
        narxi INTEGER
    )''')

    # Ma’lumot qo‘shish
    cursor.execute("INSERT INTO products (nomi, narxi) VALUES (%s, %s)", ("Telefon", 500))
    cursor.execute("INSERT INTO products (nomi, narxi) VALUES (%s, %s)", ("Noutbuk", 800))
    conn.commit()

    # Ma’lumot olish
    cursor.execute("SELECT * FROM products WHERE narxi > 100")
    natija = cursor.fetchall()
    print(natija)  # [(1, 'Telefon', 500), (2, 'Noutbuk', 800)]

except psycopg2.Error as xato:
    print(f"Xato: {xato}")
finally:
    cursor.close()
    conn.close()
```

### Mashq 3: Ma’lumotni o‘zgartirish va o‘chirish
- Yuqoridagi `products` jadvalidagi "Telefon" mahsulotining narxini 600 ga o‘zgartiring.  
- "Noutbuk" mahsulotini o‘chiring.

```python
import psycopg2

try:
    conn = psycopg2.connect(
        database="mydatabase",
        user="postgres",
        password="admin123",
        host="localhost",
        port="5432"
    )
    cursor = conn.cursor()

    # Ma’lumotni o‘zgartirish
    cursor.execute("UPDATE products SET narxi = %s WHERE nomi = %s", (600, "Telefon"))
    conn.commit()

    # Ma’lumotni o‘chirish
    cursor.execute("DELETE FROM products WHERE nomi = %s", ("Noutbuk",))
    conn.commit()

    # Natijani ko‘rish
    cursor.execute("SELECT * FROM products")
    natija = cursor.fetchall()
    print(natija)  # [(1, 'Telefon', 600)]

except psycopg2.Error as xato:
    print(f"Xato: {xato}")
finally:
    cursor.close()
    conn.close()
```

Har bir mashq uchun 8-9 daqiqa vaqt beraman. Kodlarni yozib, natijalarni ekranga chiqaring!

---

## 5. Xulosa va uy vazifasi (20 daqiqa)

Ajoyib, yosh dasturchilar! 🎉 Bugun biz PostgreSQL bilan tanishdik. Asosiy SQL so‘rovlar bilan ishlashni va Python yordamida ulanishni o‘rgandik.

Uyga vazifa sifatida quyidagini qiling:  
1. `employees` nomli jadval tuzing (id, name, salary).  
   - 3 ta xodim qo‘shish so‘rovini yozing (SQL’da).  
   - Maoshi 1000 dan yuqori bo‘lgan xodimlarni topish so‘rovini yozing.  
2. Python’da `psycopg2` yordamida:  
   - `students` jadvalini tuzing (id, ism, baho).  
   - 2 ta talaba qo‘shing.  
   - Bahosi 4 dan yuqori bo‘lgan talabalarni toping.  
3. Yuqoridagi `students` jadvalidagi bir talabaning bahosini o‘zgartiring va bitta talabani o‘chiring.  

Darsimiz shu bilan tugadi, keyingi darsda esa `PgAdmin` mavzusini o‘rganamiz. Savollaringiz bo‘lsa, yozib qoldiring yoki keyingi darsda so‘rang! 😊

---

## 6. Qayta ko'rib chiqish va savollar (10 daqiqa)

Zo‘r ish qildingiz! Endi bir oz o'rganganlarimizi qayta ko'rib chiqamiz. Bugungi darsda nimalarni o‘rgandik? Kim aytib bera oladi? (O‘quvchilar javobini kutaman.)

- PostgreSQL qanday afzalliklarga ega?  
- Python’da ulanish qanday amalga oshiriladi?  
- Qanday SQL so‘rovlar bilan ishladik?  

Qandaydir tushunmovchilik bo‘ldimi? Savollaringiz bormi? (O‘quvchilar savollarini eshitaman va tushuntiraman.) 😊

---
