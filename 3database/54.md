---

# 📚 Darsning mavzusi: PostgreSQL Insert, Update, Delete

## Qisqacha vaqt taqsimoti

| Qism                          | Davomiyligi     |
|-------------------------------|-----------------|
| Kirish va Insert, Update, Delete haqida | 20 daqiqa       |
| Insert, Update, Delete bilan ishlash | 25 daqiqa       |
| Python bilan Insert, Update, Delete so‘rovlar | 20 daqiqa       |
| Amaliy mashqlar               | 25 daqiqa       |
| Xulosa va uy vazifasi         | 20 daqiqa       |
| Qayta aloqa va savollar       | 10 daqiqa       |
| Jami                          | 120 daqiqa (2 soat) |

Bu usul yoshlar uchun samarali, qiziqarli va tushunarli bo‘lib, o‘quvchilarni dars jarayoniga faolroq jalb qiladi.

---

# 📖 Darsning batafsil rejasi

## 1. Kirish va Insert, Update, Delete haqida (20 daqiqa)

Assalomu alaykum, yosh dasturchilar! 😊 Bugun biz PostgreSQL’da ma’lumotlarni boshqarish uchun ishlatiladigan **INSERT**, **UPDATE** va **DELETE** so‘rovlarini o‘rganamiz. Bu so‘rovlar ma’lumotlar bazasida ma’lumotlarni qo‘shish, o‘zgartirish va o‘chirish uchun ishlatiladi.

**INSERT, UPDATE, DELETE nima?**  
- **INSERT:** Jadvalga yangi ma’lumot qo‘shish.  
- **UPDATE:** Mavjud ma’lumotlarni o‘zgartirish.  
- **DELETE:** Ma’lumotlarni o‘chirish.  

Bugun biz quyidagilarni o‘rganamiz:  
- INSERT yordamida ma’lumot qanday qo‘shiladi.  
- UPDATE bilan ma’lumotlar qanday yangilanadi.  
- DELETE bilan ma’lumotlar qanday o‘chiriladi.  
- Python’da ushbu so‘rovlar bilan ishlash.  

**Nima uchun bu muhim?**  
Ma’lumotlarni qo‘shish, o‘zgartirish va o‘chirish real loyihalarda, masalan, foydalanuvchi ro‘yxatini yangilash yoki mahsulotlarni boshqarishda kerak bo‘ladi.

Keling, bir savol: Ma’lumotlarni o‘zgartirish yoki o‘chirish qanday hollarda foydali bo‘ladi deb o‘ylaysiz? (O‘quvchilar javobini kutaman, to‘g‘ri javob bo‘lsa: “Ajoyib, to‘g‘ri!” deyman.)

Mashq: Quyidagi vazifani bajaring:  
- INSERT, UPDATE va DELETE haqida o‘zingizning taxminiy tushunchangizni yozing (qog‘ozda yoki fikr sifatida).  
- Qanday loyiha uchun ma’lumotlarni qo‘shish yoki o‘chirish kerak bo‘lishi mumkin (masalan, onlayn do‘kon)?  

5 daqiqa vaqt beraman!

---

## 2. Insert, Update, Delete bilan ishlash (25 daqiqa)

Endi PostgreSQL’da INSERT, UPDATE va DELETE so‘rovlarini o‘rganamiz!

### Tayyor jadval
Avval bir jadval yaratamiz:  
```sql
-- Ma’lumotlar bazasi va jadval yaratish
CREATE DATABASE store;
\c store

CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    nomi VARCHAR(50),
    narxi INTEGER,
    turi VARCHAR(20)
);
```

### INSERT bilan ma’lumot qo‘shish
**INSERT INTO** yordamida jadvalga yangi ma’lumot qo‘shamiz:  
```sql
INSERT INTO products (nomi, narxi, turi) VALUES ('Telefon', 500, 'Elektronika');
INSERT INTO products (nomi, narxi, turi) VALUES ('Noutbuk', 800, 'Elektronika');
INSERT INTO products (nomi, narxi, turi) VALUES ('Kiyim', 50, 'Moda');

-- Ma’lumotlarni ko‘rish
SELECT * FROM products;
-- Natija:
-- id | nomi    | narxi | turi
-- 1  | Telefon | 500   | Elektronika
-- 2  | Noutbuk | 800   | Elektronika
-- 3  | Kiyim   | 50    | Moda
```

### UPDATE bilan ma’lumot o‘zgartirish
**UPDATE** yordamida mavjud ma’lumotlarni yangilash mumkin:  
```sql
-- Telefonning narxini 600 ga o‘zgartirish
UPDATE products SET narxi = 600 WHERE nomi = 'Telefon';

-- Ma’lumotlarni ko‘rish
SELECT * FROM products;
-- Natija:
-- id | nomi    | narxi | turi
-- 1  | Telefon | 600   | Elektronika
-- 2  | Noutbuk | 800   | Elektronika
-- 3  | Kiyim   | 50    | Moda

-- Bir nechta ustunni o‘zgartirish
UPDATE products SET narxi = 70, turi = 'Yangilangan Moda' WHERE nomi = 'Kiyim';

-- Ma’lumotlarni ko‘rish
SELECT * FROM products;
-- Natija:
-- id | nomi    | narxi | turi
-- 1  | Telefon | 600   | Elektronika
-- 2  | Noutbuk | 800   | Elektronika
-- 3  | Kiyim   | 70    | Yangilangan Moda
```

### DELETE bilan ma’lumot o‘chirish
**DELETE** yordamida ma’lumotlarni o‘chirish:  
```sql
-- Nomi "Kiyim" bo‘lgan mahsulotni o‘chirish
DELETE FROM products WHERE nomi = 'Kiyim';

-- Ma’lumotlarni ko‘rish
SELECT * FROM products;
-- Natija:
-- id | nomi    | narxi | turi
-- 1  | Telefon | 600   | Elektronika
-- 2  | Noutbuk | 800   | Elektronika

-- Narxi 700 dan yuqori bo‘lgan mahsulotlarni o‘chirish
DELETE FROM products WHERE narxi > 700;

-- Ma’lumotlarni ko‘rish
SELECT * FROM products;
-- Natija:
-- id | nomi    | narxi | turi
-- 1  | Telefon | 600   | Elektronika
```

**Eslatma:** Bu darsda biz faqat so‘rovlar va natijalarni tasavvur qilamiz, chunki real ulanish muhitga bog‘liq.

Mashq: Quyidagi vazifani bajaring:  
- `students` nomli jadval yarating (id, ism, baho).  
- 3 ta talaba qo‘shing (masalan, Ali, 5; Zilola, 4; Vali, 3).  
- Zilola’ning bahosini 5 ga o‘zgartiring va Vali’ni o‘chiring.  

5 daqiqa vaqt beraman!

---

## 3. Python bilan Insert, Update, Delete so‘rovlar (20 daqiqa)

Ajoyib, endi Python yordamida INSERT, UPDATE va DELETE so‘rovlar bilan ishlashni o‘rganamiz!

### `psycopg2` bilan ulanish
Python’da PostgreSQL bilan ishlash uchun `psycopg2` ishlatamiz:

```python
import psycopg2

# PostgreSQL’ga ulanish
try:
    conn = psycopg2.connect(
        database="store",
        user="postgres",
        password="admin123",
        host="localhost",
        port="5432"
    )
    cursor = conn.cursor()
    print("Bazaga ulanildi!")

    # Jadvalni qayta yaratish (agar kerak bo‘lsa)
    cursor.execute("DROP TABLE IF EXISTS employees")
    cursor.execute('''CREATE TABLE employees (
        id SERIAL PRIMARY KEY,
        name VARCHAR(50),
        salary INTEGER
    )''')

    # INSERT bilan ma’lumot qo‘shish
    cursor.execute("INSERT INTO employees (name, salary) VALUES (%s, %s)", ("Ali", 1500))
    cursor.execute("INSERT INTO employees (name, salary) VALUES (%s, %s)", ("Vali", 1200))
    cursor.execute("INSERT INTO employees (name, salary) VALUES (%s, %s)", ("Zilola", 900))
    conn.commit()

    # Ma’lumotlarni ko‘rish
    cursor.execute("SELECT * FROM employees")
    print("Qo‘shilgan ma’lumotlar:", cursor.fetchall())
    # Natija: [(1, 'Ali', 1500), (2, 'Vali', 1200), (3, 'Zilola', 900)]

    # UPDATE bilan ma’lumot o‘zgartirish
    cursor.execute("UPDATE employees SET salary = %s WHERE name = %s", (1000, "Zilola"))
    conn.commit()

    # Ma’lumotlarni ko‘rish
    cursor.execute("SELECT * FROM employees")
    print("Yangilangan ma’lumotlar:", cursor.fetchall())
    # Natija: [(1, 'Ali', 1500), (2, 'Vali', 1200), (3, 'Zilola', 1000)]

    # DELETE bilan ma’lumot o‘chirish
    cursor.execute("DELETE FROM employees WHERE salary < %s", (1100,))
    conn.commit()

    # Ma’lumotlarni ko‘rish
    cursor.execute("SELECT * FROM employees")
    print("O‘chirilgandan keyin:", cursor.fetchall())
    # Natija: [(1, 'Ali', 1500), (2, 'Vali', 1200)]

except psycopg2.Error as xato:
    print(f"Xato: {xato}")
finally:
    cursor.close()
    conn.close()
    print("Ulanish yopildi!")
```

**Tushuntirish:**  
- `cursor.execute` yordamida INSERT, UPDATE va DELETE so‘rovlarini bajarish mumkin.  
- `%s` o‘rniga qiymatlar qo‘yish xavfsiz usul (SQL injection’ni oldini oladi).  
- `conn.commit()` o‘zgarishlarni saqlash uchun muhim.  

**Eslatma:** Bu darsda biz faqat kodni ko‘rib chiqamiz, chunki real ulanish muhitga bog‘liq.

Mashq: Quyidagi vazifani bajaring:  
- Python’da `products` nomli jadval yarating (id, nomi, narxi).  
- 3 ta mahsulot qo‘shing (masalan, Telefon, 500; Noutbuk, 800; Kiyim, 50).  
- Telefonning narxini 600 ga o‘zgartiring va Kiyim’ni o‘chiring.  

5 daqiqa vaqt beraman!

---

## 4. Amaliy mashqlar (25 daqiqa)

Endi o‘rganganlarimizni amalda sinab ko‘ramiz! Quyidagi mashqlarni qilamiz:

### Mashq 1: SQL’da INSERT, UPDATE, DELETE
- `books` nomli jadval yarating (id, title, price).  
- 3 ta kitob qo‘shing (masalan, Python 101, 60; Java Basics, 40; Data Science, 80).  
- Java Basics narxini 50 ga o‘zgartiring va Data Science’ni o‘chiring.

```sql
-- Jadval yaratish
CREATE TABLE books (
    id SERIAL PRIMARY KEY,
    title VARCHAR(100),
    price INTEGER
);

-- Ma’lumot qo‘shish
INSERT INTO books (title, price) VALUES ('Python 101', 60);
INSERT INTO books (title, price) VALUES ('Java Basics', 40);
INSERT INTO books (title, price) VALUES ('Data Science', 80);

-- Ma’lumot o‘zgartirish
UPDATE books SET price = 50 WHERE title = 'Java Basics';

-- Ma’lumot o‘chirish
DELETE FROM books WHERE title = 'Data Science';

-- Natijani ko‘rish
SELECT * FROM books;
-- Natija:
-- id | title      | price
-- 1  | Python 101 | 60
-- 2  | Java Basics| 50
```

### Mashq 2: Python’da INSERT, UPDATE, DELETE
- `students` nomli jadval yarating (id, ism, baho).  
- 3 ta talaba qo‘shing.  
- Bir talabaning bahosini o‘zgartiring va bir talabani o‘chiring.

```python
import psycopg2

try:
    conn = psycopg2.connect(
        database="store",
        user="postgres",
        password="admin123",
        host="localhost",
        port="5432"
    )
    cursor = conn.cursor()

    # Jadval yaratish
    cursor.execute('''CREATE TABLE IF NOT EXISTS students (
        id SERIAL PRIMARY KEY,
        ism VARCHAR(50),
        baho INTEGER
    )''')

    # Ma’lumot qo‘shish
    cursor.execute("INSERT INTO students (ism, baho) VALUES (%s, %s)", ("Ali", 5))
    cursor.execute("INSERT INTO students (ism, baho) VALUES (%s, %s)", ("Zilola", 4))
    cursor.execute("INSERT INTO students (ism, baho) VALUES (%s, %s)", ("Vali", 3))
    conn.commit()

    # Baho o‘zgartirish
    cursor.execute("UPDATE students SET baho = %s WHERE ism = %s", (5, "Zilola"))
    conn.commit()

    # Talaba o‘chirish
    cursor.execute("DELETE FROM students WHERE ism = %s", ("Vali",))
    conn.commit()

    # Natijani ko‘rish
    cursor.execute("SELECT * FROM students")
    print(cursor.fetchall())  # [(1, 'Ali', 5), (2, 'Zilola', 5)]

except psycopg2.Error as xato:
    print(f"Xato: {xato}")
finally:
    cursor.close()
    conn.close()
```

### Mashq 3: Murakkab shartlar bilan o‘chirish
- Yuqoridagi `students` jadvalida:  
  - Bahosi 5 ga teng bo‘lgan talabalarni o‘chiring.  
  - Natijani ko‘rish so‘rovini yozing.

```sql
-- Bahosi 5 ga teng bo‘lgan talabalarni o‘chirish
DELETE FROM students WHERE baho = 5;

-- Natijani ko‘rish
SELECT * FROM students;
-- Natija: Bo‘sh bo‘ladi, chunki barcha talabalarning bahosi 5 edi
```

Har bir mashq uchun 8-9 daqiqa vaqt beraman. Kodlarni yozib, natijalarni ekranga chiqaring!

---

## 5. Xulosa va uy vazifasi (20 daqiqa)

Ajoyib, yosh dasturchilar! 🎉 Bugun biz PostgreSQL’da INSERT, UPDATE va DELETE so‘rovlar bilan ishlashni o‘rgandik. SQL va Python yordamida ma’lumotlarni qanday qo‘shish, o‘zgartirish va o‘chirishni ko‘rdik.

Uyga vazifa sifatida quyidagini qiling:  
1. `employees` nomli jadval yarating (id, name, salary).  
   - 3 ta xodim qo‘shing (SQL’da).  
   - Bir xodimning maoshini o‘zgartiring va bir xodimni o‘chiring.  
2. Python’da `products` nomli jadval yarating (id, nomi, narxi).  
   - 3 ta mahsulot qo‘shing.  
   - Bir mahsulotning narxini o‘zgartiring va narxi 100 dan kichik bo‘lgan mahsulotlarni o‘chiring.  
3. Yuqoridagi `products` jadvalida qolgan mahsulotlarni ko‘rish so‘rovini yozing (SQL’da).  

Darsimiz shu bilan tugadi, keyingi darsda esa `PostgreSQL Where, Order By` mavzusini o‘rganamiz. Savollaringiz bo‘lsa, yozib qoldiring yoki keyingi darsda so‘rang! 😊

---

## 6. Qayta ko'rib chiqish va savollar (10 daqiqa)

Zo‘r ish qildingiz! Endi bir oz o'rganganlarimizi qayta ko'rib chiqamiz. Bugungi darsda nimalarni o‘rgandik? Kim aytib bera oladi? (O‘quvchilar javobini kutaman.)

- INSERT qanday ishlaydi?  
- UPDATE va DELETE so‘rovlarida qanday shartlar qo‘yiladi?  
- Python’da so‘rovlar qanday bajarildi?  

Qandaydir tushunmovchilik bo‘ldimi? Savollaringiz bormi? (O‘quvchilar savollarini eshitaman va tushuntiraman.) 😊

---