---

# ðŸ“š Darsning mavzusi: PostgreSQL Insert, Update, Delete

## Qisqacha vaqt taqsimoti

| Qism                          | Davomiyligi     |
|-------------------------------|-----------------|
| Kirish va Insert, Update, Delete haqida | 20 daqiqa       |
| Insert, Update, Delete bilan ishlash | 25 daqiqa       |
| Python bilan Insert, Update, Delete soâ€˜rovlar | 20 daqiqa       |
| Amaliy mashqlar               | 25 daqiqa       |
| Xulosa va uy vazifasi         | 20 daqiqa       |
| Qayta aloqa va savollar       | 10 daqiqa       |
| Jami                          | 120 daqiqa (2 soat) |

Bu usul yoshlar uchun samarali, qiziqarli va tushunarli boâ€˜lib, oâ€˜quvchilarni dars jarayoniga faolroq jalb qiladi.

---

# ðŸ“– Darsning batafsil rejasi

## 1. Kirish va Insert, Update, Delete haqida (20 daqiqa)

Assalomu alaykum, yosh dasturchilar! ðŸ˜Š Bugun biz PostgreSQLâ€™da maâ€™lumotlarni boshqarish uchun ishlatiladigan **INSERT**, **UPDATE** va **DELETE** soâ€˜rovlarini oâ€˜rganamiz. Bu soâ€˜rovlar maâ€™lumotlar bazasida maâ€™lumotlarni qoâ€˜shish, oâ€˜zgartirish va oâ€˜chirish uchun ishlatiladi.

**INSERT, UPDATE, DELETE nima?**  
- **INSERT:** Jadvalga yangi maâ€™lumot qoâ€˜shish.  
- **UPDATE:** Mavjud maâ€™lumotlarni oâ€˜zgartirish.  
- **DELETE:** Maâ€™lumotlarni oâ€˜chirish.  

Bugun biz quyidagilarni oâ€˜rganamiz:  
- INSERT yordamida maâ€™lumot qanday qoâ€˜shiladi.  
- UPDATE bilan maâ€™lumotlar qanday yangilanadi.  
- DELETE bilan maâ€™lumotlar qanday oâ€˜chiriladi.  
- Pythonâ€™da ushbu soâ€˜rovlar bilan ishlash.  

**Nima uchun bu muhim?**  
Maâ€™lumotlarni qoâ€˜shish, oâ€˜zgartirish va oâ€˜chirish real loyihalarda, masalan, foydalanuvchi roâ€˜yxatini yangilash yoki mahsulotlarni boshqarishda kerak boâ€˜ladi.

Keling, bir savol: Maâ€™lumotlarni oâ€˜zgartirish yoki oâ€˜chirish qanday hollarda foydali boâ€˜ladi deb oâ€˜ylaysiz? (Oâ€˜quvchilar javobini kutaman, toâ€˜gâ€˜ri javob boâ€˜lsa: â€œAjoyib, toâ€˜gâ€˜ri!â€ deyman.)

Mashq: Quyidagi vazifani bajaring:  
- INSERT, UPDATE va DELETE haqida oâ€˜zingizning taxminiy tushunchangizni yozing (qogâ€˜ozda yoki fikr sifatida).  
- Qanday loyiha uchun maâ€™lumotlarni qoâ€˜shish yoki oâ€˜chirish kerak boâ€˜lishi mumkin (masalan, onlayn doâ€˜kon)?  

5 daqiqa vaqt beraman!

---

## 2. Insert, Update, Delete bilan ishlash (25 daqiqa)

Endi PostgreSQLâ€™da INSERT, UPDATE va DELETE soâ€˜rovlarini oâ€˜rganamiz!

### Tayyor jadval
Avval bir jadval yaratamiz:  
```sql
-- Maâ€™lumotlar bazasi va jadval yaratish
CREATE DATABASE store;
\c store

CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    nomi VARCHAR(50),
    narxi INTEGER,
    turi VARCHAR(20)
);
```

### INSERT bilan maâ€™lumot qoâ€˜shish
**INSERT INTO** yordamida jadvalga yangi maâ€™lumot qoâ€˜shamiz:  
```sql
INSERT INTO products (nomi, narxi, turi) VALUES ('Telefon', 500, 'Elektronika');
INSERT INTO products (nomi, narxi, turi) VALUES ('Noutbuk', 800, 'Elektronika');
INSERT INTO products (nomi, narxi, turi) VALUES ('Kiyim', 50, 'Moda');

-- Maâ€™lumotlarni koâ€˜rish
SELECT * FROM products;
-- Natija:
-- id | nomi    | narxi | turi
-- 1  | Telefon | 500   | Elektronika
-- 2  | Noutbuk | 800   | Elektronika
-- 3  | Kiyim   | 50    | Moda
```

### UPDATE bilan maâ€™lumot oâ€˜zgartirish
**UPDATE** yordamida mavjud maâ€™lumotlarni yangilash mumkin:  
```sql
-- Telefonning narxini 600 ga oâ€˜zgartirish
UPDATE products SET narxi = 600 WHERE nomi = 'Telefon';

-- Maâ€™lumotlarni koâ€˜rish
SELECT * FROM products;
-- Natija:
-- id | nomi    | narxi | turi
-- 1  | Telefon | 600   | Elektronika
-- 2  | Noutbuk | 800   | Elektronika
-- 3  | Kiyim   | 50    | Moda

-- Bir nechta ustunni oâ€˜zgartirish
UPDATE products SET narxi = 70, turi = 'Yangilangan Moda' WHERE nomi = 'Kiyim';

-- Maâ€™lumotlarni koâ€˜rish
SELECT * FROM products;
-- Natija:
-- id | nomi    | narxi | turi
-- 1  | Telefon | 600   | Elektronika
-- 2  | Noutbuk | 800   | Elektronika
-- 3  | Kiyim   | 70    | Yangilangan Moda
```

### DELETE bilan maâ€™lumot oâ€˜chirish
**DELETE** yordamida maâ€™lumotlarni oâ€˜chirish:  
```sql
-- Nomi "Kiyim" boâ€˜lgan mahsulotni oâ€˜chirish
DELETE FROM products WHERE nomi = 'Kiyim';

-- Maâ€™lumotlarni koâ€˜rish
SELECT * FROM products;
-- Natija:
-- id | nomi    | narxi | turi
-- 1  | Telefon | 600   | Elektronika
-- 2  | Noutbuk | 800   | Elektronika

-- Narxi 700 dan yuqori boâ€˜lgan mahsulotlarni oâ€˜chirish
DELETE FROM products WHERE narxi > 700;

-- Maâ€™lumotlarni koâ€˜rish
SELECT * FROM products;
-- Natija:
-- id | nomi    | narxi | turi
-- 1  | Telefon | 600   | Elektronika
```

**Eslatma:** Bu darsda biz faqat soâ€˜rovlar va natijalarni tasavvur qilamiz, chunki real ulanish muhitga bogâ€˜liq.

Mashq: Quyidagi vazifani bajaring:  
- `students` nomli jadval yarating (id, ism, baho).  
- 3 ta talaba qoâ€˜shing (masalan, Ali, 5; Zilola, 4; Vali, 3).  
- Zilolaâ€™ning bahosini 5 ga oâ€˜zgartiring va Valiâ€™ni oâ€˜chiring.  

5 daqiqa vaqt beraman!

---

## 3. Python bilan Insert, Update, Delete soâ€˜rovlar (20 daqiqa)

Ajoyib, endi Python yordamida INSERT, UPDATE va DELETE soâ€˜rovlar bilan ishlashni oâ€˜rganamiz!

### `psycopg2` bilan ulanish
Pythonâ€™da PostgreSQL bilan ishlash uchun `psycopg2` ishlatamiz:

```python
import psycopg2

# PostgreSQLâ€™ga ulanish
try:
    conn = psycopg2.connect(
        database="store",
        user="postgres",
        password="admin123",
        host="localhost",
        port="5432"
    )
    cursor = conn.cursor()
    print("Bazaga ulanildi!")

    # Jadvalni qayta yaratish (agar kerak boâ€˜lsa)
    cursor.execute("DROP TABLE IF EXISTS employees")
    cursor.execute('''CREATE TABLE employees (
        id SERIAL PRIMARY KEY,
        name VARCHAR(50),
        salary INTEGER
    )''')

    # INSERT bilan maâ€™lumot qoâ€˜shish
    cursor.execute("INSERT INTO employees (name, salary) VALUES (%s, %s)", ("Ali", 1500))
    cursor.execute("INSERT INTO employees (name, salary) VALUES (%s, %s)", ("Vali", 1200))
    cursor.execute("INSERT INTO employees (name, salary) VALUES (%s, %s)", ("Zilola", 900))
    conn.commit()

    # Maâ€™lumotlarni koâ€˜rish
    cursor.execute("SELECT * FROM employees")
    print("Qoâ€˜shilgan maâ€™lumotlar:", cursor.fetchall())
    # Natija: [(1, 'Ali', 1500), (2, 'Vali', 1200), (3, 'Zilola', 900)]

    # UPDATE bilan maâ€™lumot oâ€˜zgartirish
    cursor.execute("UPDATE employees SET salary = %s WHERE name = %s", (1000, "Zilola"))
    conn.commit()

    # Maâ€™lumotlarni koâ€˜rish
    cursor.execute("SELECT * FROM employees")
    print("Yangilangan maâ€™lumotlar:", cursor.fetchall())
    # Natija: [(1, 'Ali', 1500), (2, 'Vali', 1200), (3, 'Zilola', 1000)]

    # DELETE bilan maâ€™lumot oâ€˜chirish
    cursor.execute("DELETE FROM employees WHERE salary < %s", (1100,))
    conn.commit()

    # Maâ€™lumotlarni koâ€˜rish
    cursor.execute("SELECT * FROM employees")
    print("Oâ€˜chirilgandan keyin:", cursor.fetchall())
    # Natija: [(1, 'Ali', 1500), (2, 'Vali', 1200)]

except psycopg2.Error as xato:
    print(f"Xato: {xato}")
finally:
    cursor.close()
    conn.close()
    print("Ulanish yopildi!")
```

**Tushuntirish:**  
- `cursor.execute` yordamida INSERT, UPDATE va DELETE soâ€˜rovlarini bajarish mumkin.  
- `%s` oâ€˜rniga qiymatlar qoâ€˜yish xavfsiz usul (SQL injectionâ€™ni oldini oladi).  
- `conn.commit()` oâ€˜zgarishlarni saqlash uchun muhim.  

**Eslatma:** Bu darsda biz faqat kodni koâ€˜rib chiqamiz, chunki real ulanish muhitga bogâ€˜liq.

Mashq: Quyidagi vazifani bajaring:  
- Pythonâ€™da `products` nomli jadval yarating (id, nomi, narxi).  
- 3 ta mahsulot qoâ€˜shing (masalan, Telefon, 500; Noutbuk, 800; Kiyim, 50).  
- Telefonning narxini 600 ga oâ€˜zgartiring va Kiyimâ€™ni oâ€˜chiring.  

5 daqiqa vaqt beraman!

---

## 4. Amaliy mashqlar (25 daqiqa)

Endi oâ€˜rganganlarimizni amalda sinab koâ€˜ramiz! Quyidagi mashqlarni qilamiz:

### Mashq 1: SQLâ€™da INSERT, UPDATE, DELETE
- `books` nomli jadval yarating (id, title, price).  
- 3 ta kitob qoâ€˜shing (masalan, Python 101, 60; Java Basics, 40; Data Science, 80).  
- Java Basics narxini 50 ga oâ€˜zgartiring va Data Scienceâ€™ni oâ€˜chiring.

```sql
-- Jadval yaratish
CREATE TABLE books (
    id SERIAL PRIMARY KEY,
    title VARCHAR(100),
    price INTEGER
);

-- Maâ€™lumot qoâ€˜shish
INSERT INTO books (title, price) VALUES ('Python 101', 60);
INSERT INTO books (title, price) VALUES ('Java Basics', 40);
INSERT INTO books (title, price) VALUES ('Data Science', 80);

-- Maâ€™lumot oâ€˜zgartirish
UPDATE books SET price = 50 WHERE title = 'Java Basics';

-- Maâ€™lumot oâ€˜chirish
DELETE FROM books WHERE title = 'Data Science';

-- Natijani koâ€˜rish
SELECT * FROM books;
-- Natija:
-- id | title      | price
-- 1  | Python 101 | 60
-- 2  | Java Basics| 50
```

### Mashq 2: Pythonâ€™da INSERT, UPDATE, DELETE
- `students` nomli jadval yarating (id, ism, baho).  
- 3 ta talaba qoâ€˜shing.  
- Bir talabaning bahosini oâ€˜zgartiring va bir talabani oâ€˜chiring.

```python
import psycopg2

try:
    conn = psycopg2.connect(
        database="store",
        user="postgres",
        password="admin123",
        host="localhost",
        port="5432"
    )
    cursor = conn.cursor()

    # Jadval yaratish
    cursor.execute('''CREATE TABLE IF NOT EXISTS students (
        id SERIAL PRIMARY KEY,
        ism VARCHAR(50),
        baho INTEGER
    )''')

    # Maâ€™lumot qoâ€˜shish
    cursor.execute("INSERT INTO students (ism, baho) VALUES (%s, %s)", ("Ali", 5))
    cursor.execute("INSERT INTO students (ism, baho) VALUES (%s, %s)", ("Zilola", 4))
    cursor.execute("INSERT INTO students (ism, baho) VALUES (%s, %s)", ("Vali", 3))
    conn.commit()

    # Baho oâ€˜zgartirish
    cursor.execute("UPDATE students SET baho = %s WHERE ism = %s", (5, "Zilola"))
    conn.commit()

    # Talaba oâ€˜chirish
    cursor.execute("DELETE FROM students WHERE ism = %s", ("Vali",))
    conn.commit()

    # Natijani koâ€˜rish
    cursor.execute("SELECT * FROM students")
    print(cursor.fetchall())  # [(1, 'Ali', 5), (2, 'Zilola', 5)]

except psycopg2.Error as xato:
    print(f"Xato: {xato}")
finally:
    cursor.close()
    conn.close()
```

### Mashq 3: Murakkab shartlar bilan oâ€˜chirish
- Yuqoridagi `students` jadvalida:  
  - Bahosi 5 ga teng boâ€˜lgan talabalarni oâ€˜chiring.  
  - Natijani koâ€˜rish soâ€˜rovini yozing.

```sql
-- Bahosi 5 ga teng boâ€˜lgan talabalarni oâ€˜chirish
DELETE FROM students WHERE baho = 5;

-- Natijani koâ€˜rish
SELECT * FROM students;
-- Natija: Boâ€˜sh boâ€˜ladi, chunki barcha talabalarning bahosi 5 edi
```

Har bir mashq uchun 8-9 daqiqa vaqt beraman. Kodlarni yozib, natijalarni ekranga chiqaring!

---

## 5. Xulosa va uy vazifasi (20 daqiqa)

Ajoyib, yosh dasturchilar! ðŸŽ‰ Bugun biz PostgreSQLâ€™da INSERT, UPDATE va DELETE soâ€˜rovlar bilan ishlashni oâ€˜rgandik. SQL va Python yordamida maâ€™lumotlarni qanday qoâ€˜shish, oâ€˜zgartirish va oâ€˜chirishni koâ€˜rdik.

Uyga vazifa sifatida quyidagini qiling:  
1. `employees` nomli jadval yarating (id, name, salary).  
   - 3 ta xodim qoâ€˜shing (SQLâ€™da).  
   - Bir xodimning maoshini oâ€˜zgartiring va bir xodimni oâ€˜chiring.  
2. Pythonâ€™da `products` nomli jadval yarating (id, nomi, narxi).  
   - 3 ta mahsulot qoâ€˜shing.  
   - Bir mahsulotning narxini oâ€˜zgartiring va narxi 100 dan kichik boâ€˜lgan mahsulotlarni oâ€˜chiring.  
3. Yuqoridagi `products` jadvalida qolgan mahsulotlarni koâ€˜rish soâ€˜rovini yozing (SQLâ€™da).  

Darsimiz shu bilan tugadi, keyingi darsda esa `PostgreSQL Where, Order By` mavzusini oâ€˜rganamiz. Savollaringiz boâ€˜lsa, yozib qoldiring yoki keyingi darsda soâ€˜rang! ðŸ˜Š

---

## 6. Qayta ko'rib chiqish va savollar (10 daqiqa)

Zoâ€˜r ish qildingiz! Endi bir oz o'rganganlarimizi qayta ko'rib chiqamiz. Bugungi darsda nimalarni oâ€˜rgandik? Kim aytib bera oladi? (Oâ€˜quvchilar javobini kutaman.)

- INSERT qanday ishlaydi?  
- UPDATE va DELETE soâ€˜rovlarida qanday shartlar qoâ€˜yiladi?  
- Pythonâ€™da soâ€˜rovlar qanday bajarildi?  

Qandaydir tushunmovchilik boâ€˜ldimi? Savollaringiz bormi? (Oâ€˜quvchilar savollarini eshitaman va tushuntiraman.) ðŸ˜Š

---