---

# ðŸ“š Darsning mavzusi: PostgreSQL Where, Order By

## Qisqacha vaqt taqsimoti

| Qism                          | Davomiyligi     |
|-------------------------------|-----------------|
| Kirish va Where, Order By haqida | 20 daqiqa       |
| Where va Order By bilan ishlash | 25 daqiqa       |
| Python bilan Where va Order By soâ€˜rovlar | 20 daqiqa       |
| Amaliy mashqlar               | 25 daqiqa       |
| Xulosa va uy vazifasi         | 20 daqiqa       |
| Qayta aloqa va savollar       | 10 daqiqa       |
| Jami                          | 120 daqiqa (2 soat) |

Bu usul yoshlar uchun samarali, qiziqarli va tushunarli boâ€˜lib, oâ€˜quvchilarni dars jarayoniga faolroq jalb qiladi.

---

# ðŸ“– Darsning batafsil rejasi

## 1. Kirish va Where, Order By haqida (20 daqiqa)

Assalomu alaykum, yosh dasturchilar! ðŸ˜Š Bugun biz PostgreSQLâ€™da maâ€™lumotlarni filtrlash va tartiblash uchun ishlatiladigan **WHERE** va **ORDER BY** soâ€˜rovlarini oâ€˜rganamiz. Bu soâ€˜rovlar maâ€™lumotlar bazasidan maâ€™lumotlarni kerakli shartlar asosida olish va tartibda koâ€˜rsatish uchun juda muhim.

**WHERE va ORDER BY nima?**  
- **WHERE:** Maâ€™lumotlarni filtrlash uchun shart qoâ€˜yadi (masalan, narxi 100 dan yuqori boâ€˜lgan mahsulotlar).  
- **ORDER BY:** Maâ€™lumotlarni tartiblash uchun ishlatiladi (masalan, narx boâ€˜yicha oâ€˜sish tartibida).  

Bugun biz quyidagilarni oâ€˜rganamiz:  
- WHERE yordamida maâ€™lumotlarni qanday filtrlash.  
- ORDER BY bilan maâ€™lumotlarni qanday tartiblash.  
- Pythonâ€™da ushbu soâ€˜rovlar bilan ishlash.  

**Nima uchun bu muhim?**  
Maâ€™lumotlarni filtrlash va tartiblash real loyihalarda, masalan, mahsulotlarni narx boâ€˜yicha tartiblash yoki faqat maâ€™lum shartlarga mos foydalanuvchilarni koâ€˜rsatishda kerak boâ€˜ladi.

Keling, bir savol: Maâ€™lumotlarni tartiblash qanday hollarda foydali boâ€˜ladi deb oâ€˜ylaysiz? (Oâ€˜quvchilar javobini kutaman, toâ€˜gâ€˜ri javob boâ€˜lsa: â€œAjoyib, toâ€˜gâ€˜ri!â€ deyman.)

Mashq: Quyidagi vazifani bajaring:  
- WHERE va ORDER BY haqida oâ€˜zingizning taxminiy tushunchangizni yozing (qogâ€˜ozda yoki fikr sifatida).  
- Qanday loyiha uchun maâ€™lumotlarni tartiblash kerak boâ€˜lishi mumkin (masalan, onlayn doâ€˜kon)?  

5 daqiqa vaqt beraman!

---

## 2. Where va Order By bilan ishlash (25 daqiqa)

Endi PostgreSQLâ€™da WHERE va ORDER BY soâ€˜rovlarini oâ€˜rganamiz!

### Tayyor jadval
Avval bir jadval yaratamiz va unga maâ€™lumot qoâ€˜shamiz:  
```sql
-- Maâ€™lumotlar bazasi va jadval yaratish
CREATE DATABASE shop;
\c shop

CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    nomi VARCHAR(50),
    narxi INTEGER,
    turi VARCHAR(20)
);

-- Maâ€™lumot qoâ€˜shish
INSERT INTO products (nomi, narxi, turi) VALUES ('Telefon', 500, 'Elektronika');
INSERT INTO products (nomi, narxi, turi) VALUES ('Noutbuk', 800, 'Elektronika');
INSERT INTO products (nomi, narxi, turi) VALUES ('Kiyim', 50, 'Moda');
INSERT INTO products (nomi, narxi, turi) VALUES ('Aksessuar', 20, 'Moda');
```

### WHERE bilan filtrlash
**WHERE** yordamida maâ€™lumotlarni shart asosida tanlaymiz:  
```sql
-- Narxi 100 dan yuqori boâ€˜lgan mahsulotlarni olish
SELECT * FROM products WHERE narxi > 100;
-- Natija:
-- id | nomi    | narxi | turi
-- 1  | Telefon | 500   | Elektronika
-- 2  | Noutbuk | 800   | Elektronika

-- Turi "Moda" boâ€˜lgan mahsulotlarni olish
SELECT * FROM products WHERE turi = 'Moda';
-- Natija:
-- id | nomi      | narxi | turi
-- 3  | Kiyim     | 50    | Moda
-- 4  | Aksessuar | 20    | Moda

-- Murakkab shart: Narxi 100 dan kichik va turi "Moda"
SELECT * FROM products WHERE narxi < 100 AND turi = 'Moda';
-- Natija:
-- id | nomi      | narxi | turi
-- 3  | Kiyim     | 50    | Moda
-- 4  | Aksessuar | 20    | Moda
```

### ORDER BY bilan tartiblash
**ORDER BY** yordamida maâ€™lumotlarni tartiblash:  
```sql
-- Narx boâ€˜yicha oâ€˜sish tartibida
SELECT * FROM products ORDER BY narxi ASC;
-- Natija:
-- id | nomi      | narxi | turi
-- 4  | Aksessuar | 20    | Moda
-- 3  | Kiyim     | 50    | Moda
-- 1  | Telefon   | 500   | Elektronika
-- 2  | Noutbuk   | 800   | Elektronika

-- Narx boâ€˜yicha kamayish tartibida
SELECT * FROM products ORDER BY narxi DESC;
-- Natija:
-- id | nomi      | narxi | turi
-- 2  | Noutbuk   | 800   | Elektronika
-- 1  | Telefon   | 500   | Elektronika
-- 3  | Kiyim     | 50    | Moda
-- 4  | Aksessuar | 20    | Moda
```

### WHERE va ORDER BY birgalikda
WHERE va ORDER BYâ€™ni birgalikda ishlatish:  
```sql
-- Turi "Elektronika" boâ€˜lgan mahsulotlarni narx boâ€˜yicha oâ€˜sish tartibida olish
SELECT * FROM products WHERE turi = 'Elektronika' ORDER BY narxi ASC;
-- Natija:
-- id | nomi    | narxi | turi
-- 1  | Telefon | 500   | Elektronika
-- 2  | Noutbuk | 800   | Elektronika

-- Narxi 100 dan kichik boâ€˜lgan mahsulotlarni nomi boâ€˜yicha tartiblash
SELECT * FROM products WHERE narxi < 100 ORDER BY nomi ASC;
-- Natija:
-- id | nomi      | narxi | turi
-- 4  | Aksessuar | 20    | Moda
-- 3  | Kiyim     | 50    | Moda
```

**Eslatma:** Bu darsda biz faqat soâ€˜rovlar va natijalarni tasavvur qilamiz, chunki real ulanish muhitga bogâ€˜liq.

Mashq: Quyidagi vazifani bajaring:  
- `students` nomli jadval yarating (id, ism, baho).  
- 4 ta talaba qoâ€˜shing (masalan, Ali, 5; Zilola, 4; Vali, 3; Mohira, 5).  
- Bahosi 4 dan yuqori boâ€˜lgan talabalarni ism boâ€˜yicha tartiblang.  

5 daqiqa vaqt beraman!

---

## 3. Python bilan Where va Order By soâ€˜rovlar (20 daqiqa)

Ajoyib, endi Python yordamida WHERE va ORDER BY soâ€˜rovlar bilan ishlashni oâ€˜rganamiz!

### `psycopg2` bilan ulanish
Pythonâ€™da PostgreSQL bilan ishlash uchun `psycopg2` ishlatamiz:

```python
import psycopg2

# PostgreSQLâ€™ga ulanish
try:
    conn = psycopg2.connect(
        database="shop",
        user="postgres",
        password="admin123",
        host="localhost",
        port="5432"
    )
    cursor = conn.cursor()
    print("Bazaga ulanildi!")

    # WHERE bilan filtrlash
    cursor.execute("SELECT * FROM products WHERE narxi > %s", (100,))
    natija = cursor.fetchall()
    print("Narxi 100 dan yuqori mahsulotlar:", natija)
    # Natija: [(1, 'Telefon', 500, 'Elektronika'), (2, 'Noutbuk', 800, 'Elektronika')]

    # ORDER BY bilan tartiblash
    cursor.execute("SELECT * FROM products ORDER BY narxi DESC")
    natija = cursor.fetchall()
    print("Narx boâ€˜yicha kamayish tartibida:", natija)
    # Natija: [(2, 'Noutbuk', 800, 'Elektronika'), (1, 'Telefon', 500, 'Elektronika'), ...]

    # WHERE va ORDER BY birgalikda
    cursor.execute("SELECT * FROM products WHERE turi = %s ORDER BY narxi ASC", ("Moda",))
    natija = cursor.fetchall()
    print("Turi Moda boâ€˜lgan mahsulotlar, narx boâ€˜yicha oâ€˜sish tartibida:", natija)
    # Natija: [(4, 'Aksessuar', 20, 'Moda'), (3, 'Kiyim', 50, 'Moda')]

except psycopg2.Error as xato:
    print(f"Xato: {xato}")
finally:
    cursor.close()
    conn.close()
    print("Ulanish yopildi!")
```

**Tushuntirish:**  
- `cursor.execute` yordamida WHERE va ORDER BY soâ€˜rovlarini bajarish mumkin.  
- `%s` oâ€˜rniga qiymatlar qoâ€˜yish xavfsiz usul (SQL injectionâ€™ni oldini oladi).  
- `fetchall()` barcha natijalarni roâ€˜yxat sifatida qaytaradi.  

**Eslatma:** Bu darsda biz faqat kodni koâ€˜rib chiqamiz, chunki real ulanish muhitga bogâ€˜liq.

Mashq: Quyidagi vazifani bajaring:  
- Pythonâ€™da `employees` nomli jadval yarating (id, name, salary).  
- 4 ta xodim qoâ€˜shing (masalan, Ali, 1500; Vali, 1200; Zilola, 900; Mohira, 2000).  
- Maoshi 1000 dan yuqori boâ€˜lgan xodimlarni maosh boâ€˜yicha kamayish tartibida toping.  

5 daqiqa vaqt beraman!

---

## 4. Amaliy mashqlar (25 daqiqa)

Endi oâ€˜rganganlarimizni amalda sinab koâ€˜ramiz! Quyidagi mashqlarni qilamiz:

### Mashq 1: SQLâ€™da WHERE va ORDER BY
- `books` nomli jadval yarating (id, title, price).  
- 4 ta kitob qoâ€˜shing (masalan, Python 101, 60; Java Basics, 40; Data Science, 80; AI Intro, 90).  
- Narxi 50 dan yuqori boâ€˜lgan kitoblarni narx boâ€˜yicha kamayish tartibida toping.

```sql
-- Jadval yaratish
CREATE TABLE books (
    id SERIAL PRIMARY KEY,
    title VARCHAR(100),
    price INTEGER
);

-- Maâ€™lumot qoâ€˜shish
INSERT INTO books (title, price) VALUES ('Python 101', 60);
INSERT INTO books (title, price) VALUES ('Java Basics', 40);
INSERT INTO books (title, price) VALUES ('Data Science', 80);
INSERT INTO books (title, price) VALUES ('AI Intro', 90);

-- Narxi 50 dan yuqori boâ€˜lgan kitoblarni tartiblash
SELECT * FROM books WHERE price > 50 ORDER BY price DESC;
-- Natija:
-- id | title        | price
-- 4  | AI Intro     | 90
-- 3  | Data Science | 80
-- 1  | Python 101   | 60
```

### Mashq 2: Pythonâ€™da WHERE va ORDER BY
- `students` nomli jadval yarating (id, ism, baho).  
- 4 ta talaba qoâ€˜shing.  
- Bahosi 4 dan yuqori boâ€˜lgan talabalarni ism boâ€˜yicha tartiblang.

```python
import psycopg2

try:
    conn = psycopg2.connect(
        database="shop",
        user="postgres",
        password="admin123",
        host="localhost",
        port="5432"
    )
    cursor = conn.cursor()

    # Jadval yaratish
    cursor.execute('''CREATE TABLE IF NOT EXISTS students (
        id SERIAL PRIMARY KEY,
        ism VARCHAR(50),
        baho INTEGER
    )''')

    # Maâ€™lumot qoâ€˜shish
    cursor.execute("INSERT INTO students (ism, baho) VALUES (%s, %s)", ("Ali", 5))
    cursor.execute("INSERT INTO students (ism, baho) VALUES (%s, %s)", ("Zilola", 4))
    cursor.execute("INSERT INTO students (ism, baho) VALUES (%s, %s)", ("Vali", 3))
    cursor.execute("INSERT INTO students (ism, baho) VALUES (%s, %s)", ("Mohira", 5))
    conn.commit()

    # Bahosi 4 dan yuqori boâ€˜lgan talabalarni tartiblash
    cursor.execute("SELECT * FROM students WHERE baho > %s ORDER BY ism ASC", (4,))
    natija = cursor.fetchall()
    print(natija)  # [(1, 'Ali', 5), (4, 'Mohira', 5)]

except psycopg2.Error as xato:
    print(f"Xato: {xato}")
finally:
    cursor.close()
    conn.close()
```

### Mashq 3: Murakkab shartlar bilan tartiblash
- Yuqoridagi `students` jadvalida:  
  - Bahosi 3 dan kichik yoki 5 ga teng boâ€˜lgan talabalarni baho boâ€˜yicha oâ€˜sish tartibida toping.  
  - Natijani koâ€˜rish soâ€˜rovini yozing.

```sql
-- Bahosi 3 dan kichik yoki 5 ga teng boâ€˜lgan talabalarni tartiblash
SELECT * FROM students WHERE baho < 3 OR baho = 5 ORDER BY baho ASC;
-- Natija:
-- id | ism    | baho
-- 1  | Ali    | 5
-- 4  | Mohira | 5
```

Har bir mashq uchun 8-9 daqiqa vaqt beraman. Kodlarni yozib, natijalarni ekranga chiqaring!

---

## 5. Xulosa va uy vazifasi (20 daqiqa)

Ajoyib, yosh dasturchilar! ðŸŽ‰ Bugun biz PostgreSQLâ€™da WHERE va ORDER BY soâ€˜rovlar bilan ishlashni oâ€˜rgandik. SQL va Python yordamida maâ€™lumotlarni qanday filtrlash va tartiblashni koâ€˜rdik.

Uyga vazifa sifatida quyidagini qiling:  
1. `employees` nomli jadval yarating (id, name, salary).  
   - 4 ta xodim qoâ€˜shing (SQLâ€™da).  
   - Maoshi 1000 dan yuqori boâ€˜lgan xodimlarni maosh boâ€˜yicha oâ€˜sish tartibida toping.  
2. Pythonâ€™da `products` nomli jadval yarating (id, nomi, narxi).  
   - 4 ta mahsulot qoâ€˜shing.  
   - Narxi 50 dan kichik yoki 500 ga teng boâ€˜lgan mahsulotlarni nomi boâ€˜yicha tartiblang.  
3. Yuqoridagi `products` jadvalida narxi 100 dan yuqori boâ€˜lgan mahsulotlarni narx boâ€˜yicha kamayish tartibida toping (SQLâ€™da).  

Darsimiz shu bilan tugadi, keyingi darsda esa `PostgreSQL Drop Table, MySQL Limit, MySQL Join` mavzusini oâ€˜rganamiz. Savollaringiz boâ€˜lsa, yozib qoldiring yoki keyingi darsda soâ€˜rang! ðŸ˜Š

---

## 6. Qayta ko'rib chiqish va savollar (10 daqiqa)

Zoâ€˜r ish qildingiz! Endi bir oz o'rganganlarimizi qayta ko'rib chiqamiz. Bugungi darsda nimalarni oâ€˜rgandik? Kim aytib bera oladi? (Oâ€˜quvchilar javobini kutaman.)

- WHERE qanday shartlar qoâ€˜yishda ishlatiladi?  
- ORDER BY qanday tartiblash imkonini beradi?  
- Pythonâ€™da soâ€˜rovlar qanday bajarildi?  

Qandaydir tushunmovchilik boâ€˜ldimi? Savollaringiz bormi? (Oâ€˜quvchilar savollarini eshitaman va tushuntiraman.) ðŸ˜Š

---
